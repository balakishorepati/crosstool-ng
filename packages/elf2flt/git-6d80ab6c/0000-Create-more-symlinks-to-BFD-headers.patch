From 902813b98dc5dd25719530d90a1d1502258eb458 Mon Sep 17 00:00:00 2001
From: Alexey Neyman <stilor@att.net>
Date: Sat, 29 Sep 2018 13:12:08 -0700
Subject: [PATCH] Create more symlinks to BFD headers

... diagnostics.h and bfd_stdint.h, included by <bfd/bfd.h>.

Signed-off-by: Alexey Neyman <stilor@att.net>
---
 Makefile.in | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

diff --git a/Makefile.in b/Makefile.in
index cfad06c..ed63bea 100644
--- a/Makefile.in
+++ b/Makefile.in
@@ -123,11 +123,16 @@ sinclude .deps
 	$(CC) -MM $(CPPFLAGS) $(srcdir)/*.c > .deps
 
 
+# Some versions of binutils may not have all these headers (diagnostics.h
+# appeared in binutils 2.31; bfd_stdint.h in 2.32) so some symlinks may be
+# dangling.
 bfd-headers/.stamp:
 	rm -rf bfd-headers
 	mkdir bfd-headers
-	ln -sf $(BFD_INCLUDE_DIR)/bfd.h bfd-headers/bfd.h
-	for f in ansidecl filenames hashtab libiberty symcat; do \
+	for f in bfd bfd_stdint; do \
+		ln -sf $(BFD_INCLUDE_DIR)/$$f.h bfd-headers/$$f.h || exit 1; \
+	done
+	for f in ansidecl filenames hashtab libiberty symcat diagnostics; do \
 		ln -sf $(BINUTILS_INCLUDE_DIR)/$$f.h bfd-headers/$$f.h || exit 1; \
 	done
 	ln -sf $(BINUTILS_INCLUDE_DIR)/elf bfd-headers/elf
-- 
2.19.1

